# 프로젝트 요구사항 명세서 (SRS)

## 문서 정보
- 문서 제목: [CWVTR-XG] 요구사항 명세서
- 문서 식별자: [cwvtr-xg-srs]
- 버전: [예: v0.1 초안]
- 작성일(문서 생성일): [2025년년 8월 11일]
- 작성자: [안창영/연구소]
- 검토자: [안창영/연구소]
- 승인자: [안창영/연구소]
- 상태: [초안]
- 보안 등급: [Confidential]
- 관련 티켓/이슈: []
- 연관 문서: [아키텍처 설계서, 테스트 계획서 등 경로/링크]

## 변경 이력
- [2025년 8월 11일] | [v0.1] | [안창영] | [초안 작성]

## 1. 개요

### 1.1 문서 목적
- 본 문서가 해결하려는 문제와 목표를 기술

### 1.2 시스템/제품 범위
- 임베디드 네트워크 장치 기준
  - 물리 포트: Ethernet 4포트(예: `eth0`~`eth3`), 포트별 역할 지정 및 VLAN 태깅 지원
  - 무선 WAN: 2개 모뎀(5G, LTE-R) 동시 탑재, 우선순위/장애조치/로드밸런싱 정책 지원
  - 네트워킹: L2 스위칭/브리징, L3 라우팅, NAT, 방화벽, 정책기반 라우팅(PBR)
  - VPN: SSL VPN 클라이언트 연동(예: SecuwaySSL), 자동 재연결 및 헬스체크
  - 관리/운영: 웹 관리(Boa 기반), SSH, 시리얼 콘솔, 구성 백업/복원, 로그/이벤트 관리
  - 외부 연계: NTP/시간 동기화, 원격 로깅, SW 업데이트

### 1.3 대상 독자 및 읽기 가이드
- 경영진, 기획, 개발, 테스트, 운영 등 역할별 기대사항

### 1.4 참고 문서
- [문서명, 버전, 경로/링크]

## 2. 정의 및 약어

### 2.1 용어 정의
- [용어]: [정의]

### 2.2 약어 목록
- [CWVTR-XG]: [Crewave Vehicle To Railway X Generation Wireless (LTE-R, P5G)]

## 3. 이해관계자 및 사용자

### 3.1 이해관계자 목록
- [박영수/연구소]
- [안창영/연구소]
- [신찬혁/연구소]

### 3.2 사용자 역할/페르소나
- [역할]: [목표/동기/고충]

### 3.3 주요 사용 시나리오 요약
- [시나리오명]: [간략 설명]

## 4. 시스템 개요

### 4.1 상위 수준 아키텍처
- 구성요소
  - 네트워크 포트: 4x Ethernet (`eth0`~`eth3`)
  - 무선 WAN 인터페이스: 5G 모뎀(`wwan5g`), LTE-R 모뎀(`wwan_lter`)
  - 관리 평면: 웹 UI(Boa), SSH, 시리얼 콘솔
  - 데이터 평면: 스위칭/브리징, 라우팅, NAT, 방화벽, QoS/트래픽 쉐이핑
  - 제어 평면: 링크 상태 감시, 다중 WAN 정책, VPN 세션 관리, 시간 동기화
- 데이터 흐름(개요)
  - LAN ↔ 라우팅/NAT ↔ (5G/LTE-R) WAN 경로
  - 장애 시 기본 경로에서 대체 경로(5G↔LTE-R)로 자동 전환
  - VPN 사용 시 트래픽은 터널을 통해 외부망으로 전달
- 외부 연계
  - NTP/시간 서버, 원격 로깅 서버, VPN 게이트웨이

### 4.2 운영 환경
- OS: Yocto 기반 임베디드 Linux (배포: [예: Poky], 레이어: [meta-yocto, meta-openembedded, 벤더 meta-*], 커널: [버전])
- HW: [SoC/CPU], 메모리 [용량], 스토리지 [종류/용량], 듀얼 모뎀(5G, LTE-R)
- 네트워크: 4x Ethernet, 2x 무선 WAN, 필요 시 VLAN/브릿지 구성
- 배포: 온프렘 장비, 현장 설치/원격 관리 지원

### 4.3 가정 및 의존성
- [전제 조건, 외부 서비스 의존]

### 4.4 하드웨어 사양(요구 수준)
- Ethernet 포트: 4개, 링크 속도 [10/100/1000Mbps 선택] 자동 협상, 포트별 링크/활성 LED
- 모뎀: 5G, LTE-R 각각 1개, SIM 관리/APN 설정 지원, 안테나 커넥터 [규격]
- 전원/환경: 입력 전원 [규격], 동작 온도 [범위], 진동/내구 [요구 사항]
- 저장 장치: 구성 파일/로그 보존을 위한 [내장 플래시/eMMC] 용량 [xxMB+] 이상

## 5. 기능 요구사항
- 각 항목은 식별자, 목적, 상세, 우선순위, 수용 기준으로 기술

예) FR-001: [기능 제목]
- 목적: [왜 필요한가]
- 설명: [동작 흐름/규칙]
- 우선순위: [Must/Should/Could/Won't]
- 수용 기준:
  - [Given-When-Then 또는 체크리스트]
- 비고: [제약/참고]

FR-002: [...]

### 장치 특화 기능 요구사항(예시 채움)

**FR-101: 포트 역할 및 VLAN**
- 목적: 4개 Ethernet 포트의 유연한 역할 구성
- 설명: 포트별 LAN/WAN/VLAN 태깅/언태그 설정, 브리지 그룹 구성 지원
- 우선순위: Must
- 수용 기준:
  - 포트별 역할 변경 즉시 적용(서비스 중단 ≤ [n]초)
  - 802.1Q VLAN ID [1-4094] 설정 및 PVID/Tagged 동작 검증

**FR-102: 다중 WAN(5G/LTE-R) 장애조치/우선순위**
- 목적: 무선 이중화로 서비스 연속성 확보
- 설명: 우선 순위 기반(Primary/Secondary) 또는 가중치 기반 로드밸런싱, 헬스체크(ping/HTTP/TCP)로 상태 판단
- 우선순위: Must
- 수용 기준:
  - Primary 경로 장애 시 [≤ n초] 내 Secondary로 자동 전환
  - 복구 시 히스테리시스/홀드타이머로 플랩 방지

**FR-103: 라우팅 및 PBR**
- 목적: 트래픽 유형/서브넷/포트 기준 경로 제어
- 설명: 정적 라우팅, 정책기반 라우팅(소스/포트/DSCP 기준)
- 우선순위: Must
- 수용 기준: 라우팅 규칙 적용 시 기대 경로로 패킷이 전달됨(캡처/경로 추적으로 검증)

**FR-104: NAT/방화벽**
- 목적: 보안 경계 및 주소 변환 제공
- 설명: 존 기반 정책, SNAT/DNAT/포트포워딩, 상태기반 필터링
- 우선순위: Must
- 수용 기준: 기본 차단/허용 정책 및 사용자 정의 규칙 정상 동작

**FR-105: DHCP/DNS 서비스**
- 목적: LAN 가입자 관리
- 설명: LAN DHCP 서버, 예약/정적 바인딩, 기본 DNS 포워딩/캐싱
- 우선순위: Should
- 수용 기준: 임대, 재할당, 충돌 방지, 옵션 전파(DNS, 게이트웨이) 검증

**FR-106: VPN 클라이언트(SSL)**
- 목적: 본사/관제센터로의 안전한 터널링
- 설명: SecuwaySSL 클라이언트 연동, 인증서/자격증명 관리, 자동 재연결/재시도 정책
- 우선순위: Should
- 수용 기준: 터널 수립/유지, 장애 시 재연결(≤ [n]초), 성능 [≥ x Mbps] 달성

**FR-107: 링크/품질 모니터링**
- 목적: 경로 품질 기반 의사결정
- 설명: 인터페이스별 지연/손실/가용성 측정, 5G/LTE-R 신호지표(RSRP/RSRQ/SINR) 수집
- 우선순위: Should
- 수용 기준: 대시보드/로그에 실시간/히스토리 지표 노출, 임계치 알람

**FR-108: 시간 동기화**
- 목적: 로그/보안/프로토콜 정합성 확보
- 설명: NTP(또는 rdate) 동기화, 서버 다중 설정, 부팅 시 우선 동기화
- 우선순위: Must
- 수용 기준: 시간 편차 [≤ ±x초] 유지, 서버 장애 시 대체 서버로 전환

**FR-109: 관리/운영 기능**
- 목적: 현장/원격 운영 편의성
- 설명: 웹 UI(Boa), SSH, 시리얼, 구성 백업/복원, 펌웨어 업그레이드, 롤백
- 우선순위: Must
- 수용 기준: 설정 반영, 권한 제어(관리자/읽기전용), 변경 이력 기록

**FR-110: 로깅/이벤트/알림**
- 목적: 장애 가시성 및 트러블슈팅
- 설명: 시스템/보안/VPN/인터페이스 로그, 원격 syslog 전송, 알림(Web/메일/Trap 옵션)
- 우선순위: Should
- 수용 기준: 로그 레벨/보존 정책 적용, 원격 전송 성공률 [≥ x%]

## 6. 비기능 요구사항

### 6.1 성능/확장성
- L3 라우팅 처리량: [≥ x Mbps]
- NAT 스루풋: [≥ x Mbps]
- VPN(SSL) 스루풋: [≥ x Mbps] @ 패킷 크기 [xxB]
- 지연시간: LAN→WAN 평균 [≤ x ms], 99퍼센타일 [≤ y ms]
- 장애조치 시간: Primary→Secondary 전환 [≤ n 초]
- 동시 세션: [≥ x,xxx]
- 인터페이스/정책 규모: 정적 라우트 [≥ x], 방화벽 규칙 [≥ x]

### 6.2 신뢰성/가용성
- 목표 가용성: [99.9%+] (유지보수 제외)
- 부팅 시간: 전원 인가→서비스 가능 [≤ n 초]
- 자동복구: 링크 플랩/모뎀 리스캔/재다이얼 자동화
- 헬스체크: ping/HTTP/TCP 멀티 체크, 히스테리시스 적용

### 6.3 보안
- 관리 접근: SSH(키 기반), 웹 관리 TLS(1.2+)
- 자격 증명 보호: 비밀번호/키 암호화 저장, 구성 내 민감정보 마스킹
- 감사로그: 관리자 로그인/설정 변경 이력 보존 [≥ x일]
- 펌웨어/패키지 무결성 검증(SHA-256 등)

### 6.4 규정/컴플라이언스
- 관련 법규/표준(예: 개인정보보호, 전자금융감독규정 등)

### 6.5 호환성/상호운용성
- 브라우저 호환: [Chrome/Edge/Firefox 최근 2버전]
- 프로토콜: IPv4, DHCP/DNS, NTP, SSL VPN 벤더 호환성
- 이동통신: 통신사 APN/인증 방식(5G/LTE-R) 호환

### 6.6 사용성/접근성
- UI 가이드, 접근성 기준(예: KWCAG), 국제화/지역화

### 6.7 유지보수성/운영성
- 구성: 백업/복원 파일 포맷 [JSON/TAR 등], 버전 호환성
- 모니터링: 대시보드/지표/알람, 원격 syslog/메트릭 수출
- 진단: 패킷 캡처, 인터페이스 통계, 모뎀 AT/MBIM 진단

### 6.8 재해복구/백업
- RPO/RTO, 백업 주기/보관, DR 전략

### 6.9 개인정보/데이터 보호
- 최소 수집, 마스킹/익명화, 저장/전송 암호화, 보존/파기

### 6.10 전원/환경
- 전원 입력/소비 전력 한도, 갈브라운/순단 시 안전 동작
- 동작 온도/습도, EM/진동 요구

## 7. 데이터 요구사항

### 7.1 데이터 모델 개요
- 주요 엔터티 및 관계 요약

### 7.2 엔터티/속성 상세
- [엔터티명]: [주요 속성, 제약, 인덱스]

### 7.3 데이터 품질/무결성 규칙
- 참조 무결성, 유일성, 검증 규칙

### 7.4 보존/삭제 정책
- 보존 기간, 파기 절차, 법적 요구사항

### 7.5 백업/복구 정책
- 백업 레벨/주기, 테스트 복구 절차

## 8. 인터페이스 요구사항

### 8.1 외부 시스템 연동
- 시스템명, 목적, 데이터 교환 주기/량

### 8.2 API 개요
- 인증 방식, 기본 경로, 공통 헤더/에러 포맷

### 8.3 메시지/파일 형식
- 스키마, 예시, 유효성 규칙

### 8.4 사용자 인터페이스(UI/UX)
- 관리 채널: 웹 UI(Boa 기반), SSH CLI, 시리얼 콘솔
- 화면/플로우: 네트워크(포트/VLAN), 무선 WAN(5G/LTE-R), 라우팅/PBR, 방화벽/NAT, VPN, 모니터링, 로그, 시스템
- 접근 제어: 관리자/읽기전용 계정, 세션 타임아웃, 2FA(옵션)

### 8.5 네트워크/포트/프로토콜
- 물리 포트 맵
  - `eth0`~`eth3`: 기본 LAN 포트(역할 재지정 가능)
  - `wwan5g`: 5G 모뎀 데이터 인터페이스
  - `wwan_lter`: LTE-R 모뎀 데이터 인터페이스
- 관리 포트: HTTPS [443], SSH [22] (변경 가능), VPN [정책에 따름]
- 무선 모뎀: APN/인증(PAP/CHAP), IP 할당(IPv4, 옵션 IPv6), 신호/셀 정보 조회
- 암호화/TLS: TLS 1.2+ 권장, 안전 암호군 제한

## 9. 운영 및 배포 요구사항

### 9.1 배포 아키텍처
- 단일/다중 AZ, 온프렘/클라우드, Blue-Green/Canary

### 9.2 환경 구성값
- 환경 변수, 시크릿, 구성 파일, 파라미터 저장소

### 9.3 CI/CD
- 브랜치 전략, 빌드/테스트/배포 파이프라인, 승인지점

### 9.4 접근/권한 관리
- 계정/역할, 최소권한, 감사

### 9.5 모니터링/로깅
- 지표, 대시보드, 알림 정책, 로그 보존

### 9.6 용량/스케일링
- 초기/피크 용량, 오토스케일 기준, 한도

### 9.7 라이선스/오픈소스 관리
- 서드파티 목록, 라이선스 준수, 공지 의무

## 10. 제약사항
- 기술/조직/일정/예산 제약

## 11. 리스크 및 완화 계획
- [리스크]: [영향/가능성/완화 전략/대응 계획]

## 12. 테스트 및 수용 기준

### 12.1 테스트 전략
- 단위/통합/E2E/성능/보안 테스트 범위

### 12.2 수용 테스트 케이스(ATC)

**ATC-001: 다중 WAN 장애조치**
- 목표: Primary(5G) 장애 시 Secondary(LTE-R)로 [≤ n초] 내 전환
- 절차: 5G 링크 다운 유발 → 전환 시간 측정 → 복구 후 플랩 여부 확인
- 기대 결과: 전환 시간 충족, 세션 단절 최소화, 복구 시 안정 동작

**ATC-002: L3/NAT 스루풋**
- 목표: 요구 스루풋 달성
- 절차: RFC2544/TREX 등 트래픽 생성 → 평균/99퍼센타일 측정
- 기대 결과: 성능 지표 충족, 드롭률 [≤ x%]

**ATC-003: VPN 연결 안정성**
- 목표: SSL VPN 터널 유지/복구 능력 검증
- 절차: 게이트웨이 장애/네트워크 순단 → 재연결 시간 측정
- 기대 결과: 재연결 [≤ n초], 데이터 손실 최소화

**ATC-004: 포트/VLAN 기능**
- 목표: 포트 역할 변경, VLAN 태깅/언태그 동작 검증
- 절차: 다양한 VLAN/브릿지 시나리오 구성 → L2/L3 통신 확인
- 기대 결과: 설계대로 통신 경로 확보, 루프/브로드캐스트 스톰 미발생

### 12.3 성능/부하 테스트 목표
- 지표, 시나리오, 합격 기준

### 12.4 보안 테스트 요구
- 취약점 스캔, 침투 테스트, 시큐어 코딩 점검

## 13. 마이그레이션/전환 계획
- 데이터/트래픽 전환 전략, 병행 운영, 커트오버 절차

## 14. 중단/롤백 전략
- 실패 시 복원 절차, 데이터 일관성 보장 방안

## 15. 부록

### 15.1 유스케이스 명세 템플릿
UC-XXX: [유스케이스 이름]
- 기본 흐름: [...]
- 대안 흐름: [...]
- 사전 조건: [...]
- 사후 조건: [...]
- 예외: [...]

### 15.2 API 명세 템플릿
- Endpoint: [GET/POST ...] [Path]
- 인증: [방식]
- 요청
  - Headers: [...]
  - Query/Path: [...]
  - Body(JSON): { ... }
- 응답
  - 200: { ... }
  - 4xx/5xx: { code, message, details }
- 예시: [요청/응답 샘플]

### 15.3 화면 설계 템플릿
- 화면 ID/이름, 목적, 요소 목록, 상태/에러, 내비게이션

### 15.4 용어사전 템플릿
- [용어]: [정의/출처]

## 승인 서명
- 작성: __________________ 날짜: __________
- 검토: __________________ 날짜: __________
- 승인: __________________ 날짜: __________
